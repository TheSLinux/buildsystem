# Maintainer: Anh K. Huynh <kyanh@theslinux.org>
# Original Maintainer: Jan de Groot <jgc@archlinux.org>

pkgdesc="X11 Athena Widget library"
arch=('i686' 'x86_64')
license=('custom')
url="http://xorg.freedesktop.org/"
depends=("${_FEATURE_LIB32:+lib32-}libxmu" "${_FEATURE_LIB32:+lib32-}libxpm")
makedepends=('xorg-util-macros')
options=('!libtool')
source=(${url}/releases/individual/lib/libXaw-${PACKAGE_VERSION}.tar.bz2)

build() {
  cd "${srcdir}/libXaw-${pkgver}"
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib${_FEATURE_LIB32} \
    --sysconfdir=/etc --disable-static
  make
}

package() {
  cd "${srcdir}/libXaw-${pkgver}"
  make DESTDIR="${pkgdir}" install

  install -Dm644 COPYING "${pkgdir}/usr/share/licenses/${pkgname}/COPYING"

  [[ -n "$_FEATURE_LIB32" ]] || return 0
  rm -rf \
    "${pkgdir}"/usr/bin \
    "${pkgdir}"/usr/share \
    "${pkgdir}"/usr/include
}
