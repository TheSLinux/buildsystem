# $Id: PKGBUILD 194291 2013-09-13 07:20:35Z andyrtr $
# Maintainer: Jan de Groot <jgc@archlinux.org>

pkgdesc="X11 pixmap library"
arch=('i686' 'x86_64')
license=('custom')
url="http://xorg.freedesktop.org/"
depends=("${_FEATURE_LIB32:+lib32-}libxt" "${_FEATURE_LIB32:+lib32-}libxext")
makedepends=('xorg-util-macros')
options=('!libtool')
source=("${url}/releases/individual/lib/libXpm-${PACKAGE_VERSION}.tar.bz2")

build() {
  cd "${srcdir}/libXpm-${pkgver}"
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib${_FEATURE_LIB32}/ \
    --sysconfdir=/etc --disable-static
  make
}

package() {
  cd "${srcdir}/libXpm-${pkgver}"
  make DESTDIR="${pkgdir}" install

  install -m755 -d "${pkgdir}/usr/share/licenses/${pkgname}"
  install -m644 COPYING "${pkgdir}/usr/share/licenses/${pkgname}/"

  [[ -n "$_FEATURE_LIB32" ]] || return 0
  rm -rf \
    "${pkgdir}"/usr/bin \
    "${pkgdir}"/usr/include \
    "${pkgdir}"/usr/share
}
